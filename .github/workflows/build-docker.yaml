name : Build and Publish image to docker Hub
# on: 
#   push:
#     branches:
#       - main
#   paths:
#     - 'api/dockerfile'
#     - 'front-end-nextjs/dockerfile'
on:
  [workflow_dispatch]
jobs:
  Publish_images:
    runs-on: ubuntu_latest
    steps:
      - name: checkout
        uses: actions/checkout@v4
      - name: build image
        run: |
          docker build ./api/ -t phuttipong1/project-web:latest
          docker build ./front-end-nextjs/ -t phuttipong1/project-web:latest
      - name: push image to docker hub
        run:  |
          docker login -u phuttipong1 -p ${{ secrets.DOCKER_HUB_TOKEN }}
          docker push phuttipong1/project-web:latest
          docker push phuttipong1/project-web:latest
